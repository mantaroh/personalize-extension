# パーソナライズブラウザ拡張

このプロジェクトは、閲覧履歴やユーザー操作に応じてウェブページの表示をパーソナライズするブラウザ拡張のベース実装です。Chrome / Firefox の両方で動作する WebExtension を想定しています。

## ディレクトリ構成

```
extension/
├── background/
│   └── background.js     # 非同期タスクを扱うサービスワーカー
├── content/
│   └── content-script.js # ユーザー操作を監視しページに反映
└── manifest.json          # 共有マニフェスト
```

## 機能概要

- **非同期バックグラウンド処理**: `background.js` は、ユーザー操作をキューに積んで順番に処理し、定期的な同期タスク（`browser.alarms`）も実行します。
- **操作記録の取得**: `content-script.js` がクリック・スクロールを検知し、現在のタブ URL と共にバックグラウンドへ送信します。
- **ページのパーソナライズ**: 保存した統計情報に応じてページにハイライト色を適用するサンプルロジックを実装しています。

## 開発 / 動作確認

### Chrome
1. Chrome を開き、 `chrome://extensions` を表示します。
2. 「デベロッパーモード」を有効化します。
3. 「パッケージ化されていない拡張機能を読み込む」をクリックし、`extension/` ディレクトリを選択します。

### Firefox
1. Firefox を開き、 `about:debugging#/runtime/this-firefox` を表示します。
2. 「一時的なアドオンを読み込む」をクリックし、`extension/manifest.json` を指定します。

## 今後の拡張

- ユーザーごとの詳細な嗜好分析の実装
- サーバーと連携した履歴同期
- オプションページ / UI の追加
